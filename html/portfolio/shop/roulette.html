<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-compatible" content="IE=Edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scaleable=no,minimum-scale=1.0,maximum-scale=1.0">
    <title>룰렛 페이지</title>
    <script src="../js/jquery.js"></script>
    <script>
        $(document).ready(function(){
            var $check; 
            var $coin = 0;  
            var $pc;    
            var $node;  
            var $array = [
                "할인쿠폰 30%",
                "적립금 500p",
                "할인쿠폰 10%",
                "적립금 500p",
                "할인쿠폰 20%",
                "적립금 1000p",
                "할인쿠폰 10%",
                "적립금 500p"
            ];
            var $r = 0; 
            $("#spanbtn").click(function abc(){ 
                
                $("#spanbtn").unbind("click");    

                $coin = $coin+1;    
                $pc = Math.floor(Math.random()*360);    
                $r += 1800;   
                if($coin>3){    
                    $(".blackbox").fadeIn();
                    alert("오늘 기회는 모두 끝났습니다.");
                }
                else{   
                    var $number = $("#gamerull").rotate($r);
                    setTimeout(function(){  
                        $("#alert").fadeIn().animate({  
                            "top":"570px"
                        },800);
                        $("#msgtext").append($array[$number[2]]);
                        $("#spanbtn").click(function(){
                            $("#alert").fadeOut().animate({  
                                "top":"550px"
                            },800);
                            $("#msgtext").text("");
                            abc();
                        });
                    },5000);
                }
            });

            $.fn.rotate = function($r){
                if($pc >= 10 && $pc <= 40){
                    $node = 0;
                }
                else if($pc >= 50 && $pc <= 85){
                    $node = 1;
                }
                else if($pc >= 95 && $pc <= 130){
                    $node = 2;
                }
                else if($pc >= 145 && $pc <= 170){
                    $node = 3;
                }
                else if($pc >= 190 && $pc <= 220){
                    $node = 4;
                }
                else if($pc >= 240 && $pc <= 270){
                    $node = 5;
                }
                else if($pc >= 280 && $pc <= 300){
                    $node = 6;
                }
                else if($pc >= 330 && $pc <= 355){
                    $node = 7;
                }
                else {  
                    $pc = 345;
                    $node = 7;
                }

                var $sc = $r + $pc;
                $(this).css("transform","rotate("+ $sc +"deg)");
                
                return [$(this),$pc,$node];
            };

            $("#okbtn").click(function(){
                $("#alert").fadeOut().animate({  
                    "top":"550px"
                },800);
            });
        });
    </script>
    <style>
        body { margin: 0; padding: 0;}
        .sectioncss { height: 1280px; }
        .gamebk { 
            width: 800px; height: 1280px;
            margin: 0 auto; background-image: url("image/game_bk.png");
            background-repeat: no-repeat;
            background-size: cover; position: relative;
        }
        .coincss { 
            display: block; position:absolute; left: 100px; bottom: 180px; z-index: 5;
        }
        .gamerull { 
            display: block; position: absolute; width: 585px; height: 585px; 
            left: 50%; margin-left: -292.5px; bottom: 200px; transition: 5s;
        }
        .spanbtn{ 
            display: block; position: absolute; width: 140px; height: 140px;
            left: 50%; margin-left: -68.5px; bottom: 424px; z-index: 10; cursor: pointer;
        }
        .gamebar{
            display: block; position: absolute; width: 51px; height: 51px;
            left: 50%; margin-left: -25.5px; top: 520px; z-index: 10; 
        }
        .alert{ 
            width: 300px; height: 100px; display: block; border: 2px dashed white;
            background-color: rgba(207,157,49,0.8);
            position: absolute; left: 50%; margin-left: -150px;
            top: 550px; z-index: 15; border-radius: 10px;  display: none;
            box-shadow: 3px 3px 3px 3px #000;
        }
        .okbtn{ 
            width: 80px; height: 30px; display: block; border-radius: 10px;
            background-color: deepskyblue; text-align: center; line-height: 30px;
            font-weight: bold; color: white; cursor: pointer; position: relative;
            margin: 0 auto; top: 100%; margin-top: -40px; font-size: 13px; 
        }
        .msgtext{
            width: 100%; height: 40px; display: block; text-align: center;
            position: absolute; font-weight: bold; color: white; font-size: 17px;
            font-family: "돋움"; 
            line-height: 40px;
        }
        .blackbox { 
            position: absolute; z-index: 100;
            box-shadow: 0 0 0 9999px rgba(0,0,0,0.5); display: none;
        }
    </style>
</head>
<body>
<div class="blackbox"></div>
<section class="sectioncss" id="sectioncss">
    <aside class="gamebk">
        <!-- alert 메세지 출력 -->
        <label class="alert" id="alert">
            <span class="msgtext" id="msgtext"></span>
            <span class="okbtn" id="okbtn">확 인</span>
        </label>
        <label class="gamebar">
            <img src="../jquery/image/game_bar.png">
        </label>
        <span class="spanbtn" id="spanbtn">
            <img src="../jquery/image/game_btn.png">
        </span>
        <label class="gamerull" id="gamerull">
            <img src="../jquery/image/game_pan.png">
        </label>
        <span class="coincss">
            <img src="../jquery/image/game_coin.png">
        </span>
    </aside>
</section>
</body>
</html>
